server:
  port: 8080

spring:
  application:
    name: ai-medical-platform

  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ai_medical?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: ${DB_PASSWORD:123456}

  # Redis配置
  data:
    redis:
      host: localhost
      port: 6379
      password:
      database: 0
      timeout: 3000
      lettuce:
        pool:
          max-active: 8
          max-wait: -1
          max-idle: 8
          min-idle: 0

  # Jackson配置
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: com.medical.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# Sa-Token配置
sa-token:
  token-name: Authorization
  timeout: 7200
  activity-timeout: 1800
  is-concurrent: true
  is-share: false
  token-style: uuid
  is-log: false
  is-print: false
  jwt-secret-key: ${SA_TOKEN_JWT_SECRET:kP8fD2hL5mN9qR3tV6wY4zB7xC0vF1sG4hJ2kM5nP8q}
  # 启用JWT模式（无状态，不需要Redis或数据库存储）
  # 注意：不使用 token-prefix，前端直接发送 token 值即可

# 讯飞星火配置（暂时不用）
spark:
  api:
    app-id: e6209821
    api-key: 6a78e6362708c1e9cca76dd057976e4d
    api-secret: YWRmYzg0ZGNhMmZjMDUwYThiZmFiNGRm
    url: wss://spark-api.xf-yun.com/v4.0/chat

# 智谱AI配置
zhipu:
  api:
    key: 8f8131f0fbf24f048f179ce7341c8416.wf39UevytBH8x4Rp
    model: glm-4
    url: https://open.bigmodel.cn/api/paas/v4/chat/completions

# 文件上传配置
file:
  upload-path: uploads
  upload-url-prefix: /uploads
  max-size: 5MB

# 应用配置
app:
  cors:
    allowed-origins:
    - http://localhost:5173
    - http://localhost:3000
    - http://localhost:8080
      - http://localhost:5173
      - http://localhost:3000
      - http://localhost:8080

# 日志配置
logging:
  level:
    com.medical: debug
    org.springframework.web: info
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
